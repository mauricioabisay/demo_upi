function error(e){alert("ERROR("+e.code+"): "+e.message)}function createMap(e){var t=e.coords.latitude,o=e.coords.longitude;currentMarker=L.marker([t,o]),map=new L.Map("map-public");var n=new L.TileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{minZoom:10,maxZoom:18,attribution:'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'});map.setView(new L.LatLng(t,o),15),map.addLayer(n),map.addLayer(locationsLayer);var i=L.popup({autoClose:!1,closeOnClick:!1,className:"current-popup"}).setContent("Tú estás aquí");currentMarker.addTo(map).bindPopup(i).openPopup(),loadLocations(),map.on("zoomend",function(){loadLocations()}),map.on("dragend",function(){loadLocations()})}function loadLocations(){jQuery.post(jQuery("#admin-url").val(),{action:"getEventsInBounds",north:map.getBounds().getNorth(),south:map.getBounds().getSouth(),west:map.getBounds().getWest(),east:map.getBounds().getEast()},function(e){locationsLayer.clearLayers();for(var t,o,n,i=JSON.parse(e),a=0;a<i.locations.length;a++){t=i.locations[a].meta["nwm-wp-location-lat"][0],o=i.locations[a].meta["nwm-wp-location-lng"][0],n=L.marker([t,o]);var r=L.popup({closeOnClick:!1,autoClose:!1,closeButton:!1}).setContent(i.locations[a].post_title);n.bindPopup(r),locationsLayer.addLayer(n)}locationsLayer.eachLayer(function(e){e.openPopup()})})}function getDistanceFromLatLonInKm(e,t,o,n){var i=deg2rad(o-e),a=deg2rad(n-t),r=Math.sin(i/2)*Math.sin(i/2)+Math.cos(deg2rad(e))*Math.cos(deg2rad(o))*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))}function deg2rad(e){return e*(Math.PI/180)}!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t,o){e.addEventListener(t,o)}function o(e){m=window.innerWidth||document.documentElement.clientWidth,u=window.innerHeight||document.documentElement.clientHeight,"object"!==(void 0===e?"undefined":a(e))||"load"!==e.type&&"DOMContentLoaded"!==e.type||(g=!0)}function n(){if(f.length){d=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;var e=g||!y||y.width!==m||y.height!==u,t=e||!y||y.y!==d;g=!1,(e||t)&&(f.forEach(function(o){e&&o.onResize(),t&&o.onScroll()}),y={width:m,height:u,y:d}),p(n)}}var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){for(var e="transform WebkitTransform MozTransform".split(" "),t=document.createElement("div"),o=0;o<e.length;o++)if(t&&void 0!==t.style[e[o]])return e[o];return!1}(),s=navigator.userAgent,l=s.toLowerCase().indexOf("android")>-1,c=/iPad|iPhone|iPod/.test(s)&&!window.MSStream,p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},m=void 0,u=void 0,d=void 0,g=!1;o(),t(window,"resize",o),t(window,"orientationchange",o),t(window,"load",o),t(window,"DOMContentLoaded",o);var f=[],y=!1,h=0,v=function(){function t(o,n){e(this,t);var i=this;i.instanceID=h++,i.$item=o,i.defaults={type:"scroll",speed:.5,imgSrc:null,imgElement:".jarallax-img",imgSize:"cover",imgPosition:"50% 50%",imgRepeat:"no-repeat",keepImg:!1,elementInViewport:null,zIndex:-100,noAndroid:!1,noIos:!1,videoSrc:null,videoStartTime:0,videoEndTime:0,videoVolume:0,videoPlayOnlyVisible:!0,onScroll:null,onInit:null,onDestroy:null,onCoverImage:null};var r=i.$item.getAttribute("data-jarallax"),s=JSON.parse(r||"{}");r&&console.warn("Detected usage of deprecated data-jarallax JSON options, you should use pure data-attribute options. See info here - https://github.com/nk-o/jarallax/issues/53");var p=i.$item.dataset||{},m={};Object.keys(p).forEach(function(e){var t=e.substr(0,1).toLowerCase()+e.substr(1);t&&void 0!==i.defaults[t]&&(m[t]=p[e])}),i.options=i.extend({},i.defaults,s,m,n),i.pureOptions=i.extend({},i.options),Object.keys(i.options).forEach(function(e){"true"===i.options[e]?i.options[e]=!0:"false"===i.options[e]&&(i.options[e]=!1)}),i.options.speed=Math.min(2,Math.max(-1,parseFloat(i.options.speed)));var u=i.options.elementInViewport;u&&"object"===(void 0===u?"undefined":a(u))&&void 0!==u.length&&(u=u[0]),u instanceof Element||(u=null),i.options.elementInViewport=u,i.image={src:i.options.imgSrc||null,$container:null,useImgTag:!1,position:l||c?"absolute":"fixed"},i.initImg()&&i.canInitParallax()&&i.init()}return i(t,[{key:"css",value:function(e,t){return"string"==typeof t?window.getComputedStyle(e).getPropertyValue(t):(t.transform&&r&&(t[r]=t.transform),Object.keys(t).forEach(function(o){e.style[o]=t[o]}),e)}},{key:"extend",value:function(e){var t=arguments;return e=e||{},Object.keys(arguments).forEach(function(o){t[o]&&Object.keys(t[o]).forEach(function(n){e[n]=t[o][n]})}),e}},{key:"getWindowData",value:function(){return{width:m,height:u,y:d}}},{key:"initImg",value:function(){var e=this,t=e.options.imgElement;return t&&"string"==typeof t&&(t=e.$item.querySelector(t)),t instanceof Element||(t=null),t&&(e.options.keepImg?e.image.$item=t.cloneNode(!0):(e.image.$item=t,e.image.$itemParent=t.parentNode),e.image.useImgTag=!0),!!e.image.$item||(null===e.image.src&&(e.image.src=e.css(e.$item,"background-image").replace(/^url\(['"]?/g,"").replace(/['"]?\)$/g,"")),!(!e.image.src||"none"===e.image.src))}},{key:"canInitParallax",value:function(){return r&&!(l&&this.options.noAndroid)&&!(c&&this.options.noIos)}},{key:"init",value:function(){var e=this,t={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",pointerEvents:"none"},o={};if(!e.options.keepImg){var n=e.$item.getAttribute("style");if(n&&e.$item.setAttribute("data-jarallax-original-styles",n),e.image.useImgTag){var i=e.image.$item.getAttribute("style");i&&e.image.$item.setAttribute("data-jarallax-original-styles",i)}}if("static"===e.css(e.$item,"position")&&e.css(e.$item,{position:"relative"}),"auto"===e.css(e.$item,"z-index")&&e.css(e.$item,{zIndex:0}),e.image.$container=document.createElement("div"),e.css(e.image.$container,t),e.css(e.image.$container,{"z-index":e.options.zIndex}),e.image.$container.setAttribute("id","jarallax-container-"+e.instanceID),e.$item.appendChild(e.image.$container),e.image.useImgTag?o=e.extend({"object-fit":e.options.imgSize,"object-position":e.options.imgPosition,"font-family":"object-fit: "+e.options.imgSize+"; object-position: "+e.options.imgPosition+";","max-width":"none"},t,o):(e.image.$item=document.createElement("div"),o=e.extend({"background-position":e.options.imgPosition,"background-size":e.options.imgSize,"background-repeat":e.options.imgRepeat,"background-image":'url("'+e.image.src+'")'},t,o)),"opacity"!==e.options.type&&"scale"!==e.options.type&&"scale-opacity"!==e.options.type&&1!==e.options.speed||(e.image.position="absolute"),"fixed"===e.image.position)for(var a=0,r=e.$item;null!==r&&r!==document&&0===a;){var s=e.css(r,"-webkit-transform")||e.css(r,"-moz-transform")||e.css(r,"transform");s&&"none"!==s&&(a=1,e.image.position="absolute"),r=r.parentNode}o.position=e.image.position,e.css(e.image.$item,o),e.image.$container.appendChild(e.image.$item),e.coverImage(),e.clipContainer(),e.onScroll(!0),e.options.onInit&&e.options.onInit.call(e),"none"!==e.css(e.$item,"background-image")&&e.css(e.$item,{"background-image":"none"}),e.addToParallaxList()}},{key:"addToParallaxList",value:function(){f.push(this),1===f.length&&n()}},{key:"removeFromParallaxList",value:function(){var e=this;f.forEach(function(t,o){t.instanceID===e.instanceID&&f.splice(o,1)})}},{key:"destroy",value:function(){var e=this;e.removeFromParallaxList();var t=e.$item.getAttribute("data-jarallax-original-styles");if(e.$item.removeAttribute("data-jarallax-original-styles"),t?e.$item.setAttribute("style",t):e.$item.removeAttribute("style"),e.image.useImgTag){var o=e.image.$item.getAttribute("data-jarallax-original-styles");e.image.$item.removeAttribute("data-jarallax-original-styles"),o?e.image.$item.setAttribute("style",t):e.image.$item.removeAttribute("style"),e.image.$itemParent&&e.image.$itemParent.appendChild(e.image.$item)}e.$clipStyles&&e.$clipStyles.parentNode.removeChild(e.$clipStyles),e.image.$container&&e.image.$container.parentNode.removeChild(e.image.$container),e.options.onDestroy&&e.options.onDestroy.call(e),delete e.$item.jarallax}},{key:"clipContainer",value:function(){if("fixed"===this.image.position){var e=this,t=e.image.$container.getBoundingClientRect(),o=t.width,n=t.height;e.$clipStyles||(e.$clipStyles=document.createElement("style"),e.$clipStyles.setAttribute("type","text/css"),e.$clipStyles.setAttribute("id","jarallax-clip-"+e.instanceID),(document.head||document.getElementsByTagName("head")[0]).appendChild(e.$clipStyles));var i="#jarallax-container-"+e.instanceID+" {\n           clip: rect(0 "+o+"px "+n+"px 0);\n           clip: rect(0, "+o+"px, "+n+"px, 0);\n        }";e.$clipStyles.styleSheet?e.$clipStyles.styleSheet.cssText=i:e.$clipStyles.innerHTML=i}}},{key:"coverImage",value:function(){var e=this,t=e.image.$container.getBoundingClientRect(),o=t.height,n=e.options.speed,i="scroll"===e.options.type||"scroll-opacity"===e.options.type,a=0,r=o,s=0;return i&&(a=n<0?n*Math.max(o,u):n*(o+u),n>1?r=Math.abs(a-u):n<0?r=a/n+Math.abs(a):r+=Math.abs(u-o)*(1-n),a/=2),e.parallaxScrollDistance=a,s=i?(u-r)/2:(o-r)/2,e.css(e.image.$item,{height:r+"px",marginTop:s+"px",left:"fixed"===e.image.position?t.left+"px":"0",width:t.width+"px"}),e.options.onCoverImage&&e.options.onCoverImage.call(e),{image:{height:r,marginTop:s},container:t}}},{key:"isVisible",value:function(){return this.isElementInViewport||!1}},{key:"onScroll",value:function(e){var t=this,o=t.$item.getBoundingClientRect(),n=o.top,i=o.height,a={},r=o;if(t.options.elementInViewport&&(r=t.options.elementInViewport.getBoundingClientRect()),t.isElementInViewport=r.bottom>=0&&r.right>=0&&r.top<=u&&r.left<=m,e||t.isElementInViewport){var s=Math.max(0,n),l=Math.max(0,i+n),c=Math.max(0,-n),p=Math.max(0,n+i-u),d=Math.max(0,i-(n+i-u)),g=Math.max(0,-n+u-i),f=1-2*(u-n)/(u+i),y=1;if(i<u?y=1-(c||p)/i:l<=u?y=l/u:d<=u&&(y=d/u),"opacity"!==t.options.type&&"scale-opacity"!==t.options.type&&"scroll-opacity"!==t.options.type||(a.transform="translate3d(0,0,0)",a.opacity=y),"scale"===t.options.type||"scale-opacity"===t.options.type){var h=1;t.options.speed<0?h-=t.options.speed*y:h+=t.options.speed*(1-y),a.transform="scale("+h+") translate3d(0,0,0)"}if("scroll"===t.options.type||"scroll-opacity"===t.options.type){var v=t.parallaxScrollDistance*f;"absolute"===t.image.position&&(v-=n),a.transform="translate3d(0,"+v+"px,0)"}t.css(t.image.$item,a),t.options.onScroll&&t.options.onScroll.call(t,{section:o,beforeTop:s,beforeTopEnd:l,afterTop:c,beforeBottom:p,beforeBottomEnd:d,afterBottom:g,visiblePercent:y,fromViewportCenter:f})}}},{key:"onResize",value:function(){this.coverImage(),this.clipContainer()}}]),t}(),b=function(e){("object"===("undefined"==typeof HTMLElement?"undefined":a(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":a(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)&&(e=[e]);var t=arguments[1],o=Array.prototype.slice.call(arguments,2),n=e.length,i=0,r=void 0;for(i;i<n;i++)if("object"===(void 0===t?"undefined":a(t))||void 0===t?e[i].jarallax||(e[i].jarallax=new v(e[i],t)):e[i].jarallax&&(r=e[i].jarallax[t].apply(e[i].jarallax,o)),void 0!==r)return r;return e};b.constructor=v;var w=window.jarallax;if(window.jarallax=b,window.jarallax.noConflict=function(){return window.jarallax=w,this},"undefined"!=typeof jQuery){var x=function(){var e=arguments||[];Array.prototype.unshift.call(e,this);var t=b.apply(window,e);return"object"!==(void 0===t?"undefined":a(t))?t:this};x.constructor=v;var $=jQuery.fn.jarallax;jQuery.fn.jarallax=x,jQuery.fn.jarallax.noConflict=function(){return jQuery.fn.jarallax=$,this}}t(window,"DOMContentLoaded",function(){b(document.querySelectorAll("[data-jarallax]"))})}();var map,currentMarker,locationsLayer=new L.layerGroup;window.onload=(jQuery(".side-open").on("click",function(){jQuery("#main-menu").addClass("active"),jQuery(".side-open").css("display","none")}),jQuery(".side-close").on("click",function(){jQuery(".side-open").css("display","block"),jQuery("#main-menu").removeClass("active")}),void jQuery(".mv-section-option").on("click",function(e){jQuery.get(e.currentTarget.dataset.url,{action:"getSectionContent",id:e.currentTarget.dataset.id},function(t){(t=JSON.parse(t)).msg&&jQuery(e.currentTarget.dataset.target).text(t.msg)})}));
//# sourceMappingURL=script.js.map
